## 数据库简介

### 作用

- 持久的存储数据
- 备份和恢复数据
- 快速的存取数据
- 权限控制

### 类型

#### 关系数据库

- 特点：
  - 以表和表的关联构成的数据结构
- 优点：
  1. 能表达复杂的数据关系
  2. 强大的查询语言，能精确查找想要的数据
- 缺点：
  1. 读写性能比较差，尤其是海量数据的读写
  2. 数据结构比较死板
- 用途：
  - 存储结构复杂的数据，尤其是业务数据
- 代表：
  - Oracle
  - MySQL
  - SQL Server

#### 非关系型数据库

- 特点：
  - 以极其简单的结构存储数据
  - 类型有文档型、键值对
- 优点：
  1. 格式灵活
  2. 海量数据读写效率很高
- 缺点：
  1. 难以表示复杂的数据结构
  2. 对于复杂查询效率不好
- 用途：
  - 存储结构简单的数据
- 代表：
  - MongoDB
  - Redis
  - Membase

#### 面向对象数据库

### 术语

- DB：database 数据库
- DBA：database administrator 数据库管理员
- DBMS：database management system 数据库管理系统
- DBS：database system 数据库系统，DBS 包含 DB、DBA、DBMS



## 数据库设计

### SQL

- Structured Query Language 结构化查询语言
- 大部分关系型数据，拥有着基本一致的SQL语法

#### 分支

- DDL：
  - Data Definition Language 数据定义语言
  - 操作数据库对象：
    - 库
    - 表
    - 视图
    - 存储过程
- DML：
  - Data Manipulation Language 数据操控语言
  - 操作数据库中的记录
- DCL：
  - Data Control Language 数据控制语句
  - 操作用户权限


### 管理库

#### 创建库

#### 切换当前库

#### 删除库

### 管理表

#### 创建表

- 字段：
  - 字段名
  - 字段类型：
    - bit：占1位，0或1，false 或 true
    - int：占32位，整数
    - decimal(M, N)：能精确计算的实数，M 是总的数字位数，N 是小数位数
    - char(n)：固定长度为 n 的字符
    - varchar(n)：长度可变，最大长度为 n 的字符
    - text：大量的字符
    - date：仅日期
    - datetime：日期和时间
    - time：仅时间
  - 是不是null
  - 自增
  - 默认值

#### 修改表

#### 删除表

### 主键和外键

#### 主键

- 根据设计原则，每张表都要有主键
- 主键必须满足的要求：
  - 唯一
  - 不能更改
  - 无业务含义

#### 外键

- 用于产生表关系的列
- 外键列会连接到另一张表（或自己）的主键

### 表关系

#### 一对一

- 一个A对应一个B，一个B对应一个A
- 例如：用户和用户信息
- 把任意一张表的主键同时设置为外键

#### 一对多

- 一个A对应多个B，一个B对应一个A，A和B是一对多，B和A是多对一
- 例如：班级和学生，用户和文章
- 在多一端的表上设置外键，对应到另一张表的主键

#### 多对一

- 一个A对应多个B，一个B对应多个A
- 例如：学生和老师
- 需要新建一张关系表，关系表至少包含两个外键，分别对应到两张表

### 三大设计范式

1. 要求数据库表的每一列都是不可分割的原子数据项
2. 非主键列必须依赖于主键列
3. 非主键列必须直接依赖主键列



## 表记录的增删改

### DML

#### 增 CREATE

#### 查 Retrieve

#### 改 UPDATE

#### 删 DELETE



## 单表基本查询

### SELECT

- 别名
- *
- case
- distinct

### FROM

### WHERE

- =
- in
- is、is not
- \> \< \>= \<=
- between
- like
- and
- or

### ORDER BY

- asc
- desc

### LIMIT

- n,m：跳过 n 条数据，取出 m 条数据

### 运行顺序

1. from
2. where
3. select
4. order by
5. limit



